# 框架设计的核心要素 
## 提升用户开发体验
- 详细告警
    - 保证开发DEBUG体验
    - 利用`__DEV__`常量控制生产构建时的产物体积
- 错误处理
    - 决定用户程序的健壮性
    - 影响开发时处理错误的心智负担
    - 开放接口给用户自定义注册统一错误处理函数
## 控制框架产物
- `Tree-Shaking`
    - 起源：构建资源时排除项目中没有用到的dead code，控制产物体积
    - 必要条件：模块必须是`ESM(ES Module)`。因为`Tree-Shaking`依赖`ESM`的静态结构
    - `/*#__PURE__*/`
        - 如果一个函数调用会产生副作用，则不能消除(典型例子：读取对象的值，表面没有副作用，但如果对象为`Proxy`监控下的代理对象，`get`时可能触发其他操作，所以作为动态语言的JavaScript很难静态分析出一个函数有没有副作用)
        - 通常产生副作用的代码都是模块内函数的顶级调用

- 针对不同情况输出不同产物
    - 开发环境(`vue.global.js`)和生产环境(`vue.global.prod.js`)
    - IIFE资源(网页直接以`<script>`引入)和ESM资源(作为模块引入)
        - ESM资源又分为浏览器端使用资源`vue.esm-browser.js`和打包工具使用资源`vue.esm-bundler.js`
    - 还可以配置并在服务端`Node.js`环境进行渲染

## 特性开关
e.g. 使用`webpack.DefinePlugin`来控制`__VUE_OPTIONS_API__`的开关
## 类型支持
想要做到完善的类型支持，需要花大力气做类型推导(如Vue3对TS的支持)，付出相当多的努力。
